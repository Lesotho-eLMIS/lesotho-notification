#%RAML 0.8
title: OpenLMIS Notification API
version: "@version@"
baseUri: "@baseUrl@"
protocols: [ HTTP, HTTPS ]

schemas:
    - notificationRequest: !include schemas/notificationRequest.json
    - userContactDetails: !include schemas/userContactDetails.json
    - errorResponse: !include schemas/errorResponse.json

traits:
    - secured:
          queryParameters:
              access_token:
                  displayName: access_token
                  description: OAuth2 access token
                  type: string
                  required: false
                  repeat: false
          headers:
              Authorization:
                  displayName: Authorization
                  description: OAuth2 authorization token header. Takes the form of 'Bearer <token>'.
                  type: string
                  required: false
                  repeat: false

/api:
  /notification:
      displayName: Notification
      post:
          is: [ secured ]
          description: Send a notification
          body:
              application/json:
                  schema: notificationRequest
          responses:
              200:
              400:
                  body:
                      application/json:
                          schema: errorResponse
  /userContactDetails:
      displayName: User Contact Details
      /{id}:
          uriParameters:
              id:
                  displayName: id
                  type: string
                  required: true
                  repeat: false
          get:
              is: [ secured ]
              description: Get user contact details.
              responses:
                  200:
                      body:
                          application/json:
                              schema: userContactDetails
                  404:
                      body:
                          application/json:
                              schema: errorResponse
                  403:
                      body:
                          application/json:
                              schema: errorResponse
          put:
              is: [ secured ]
              description: Update user contact details.
              body:
                  application/json:
                      schema: userContactDetails
              responses:
                  200:
                      body:
                          application/json:
                              schema: userContactDetails
                  400:
                      body:
                          application/json:
                              schema: errorResponse
                  403:
                      body:
                          application/json:
                              schema: errorResponse